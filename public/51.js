(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{649:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(4),i=n.n(l),o=n(18),c=n(134),s=n(328),m=n(23);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,l=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw l}}return n}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var h=document.getElementById("route").getAttribute("value"),y=function(){var e=Object(o.g)().id,t=d(Object(a.useState)([]),2),n=t[0],l=t[1],g=d(Object(a.useState)([]),2),b=g[0],h=g[1],y=d(Object(a.useState)([]),2),E=y[0],v=y[1],j=d(Object(a.useState)([]),2),S=j[0],w=j[1],A=d(Object(a.useState)([]),2),N=A[0],_=A[1],k=d(Object(a.useState)([]),2),P=k[0],M=k[1],C=d(Object(a.useState)(!0),2),I=C[0],F=C[1],x=d(Object(a.useState)({}),2),D=x[0],L=x[1],W=d(Object(a.useState)(!0),2),z=W[0],B=W[1],G=d(Object(a.useState)("None"),2),J=G[0],T=G[1],H=d(Object(a.useState)(0),2),K=H[0],R=H[1],U=d(Object(a.useState)({id:"",name:"",lat:"",lng:""}),2),$=U[0],q=U[1];Object(a.useEffect)((function(){Q(0)}),[]);var Q=function(e){i.a.get("/entities-location/".concat(e)).then((function(e){var t=e.data,n=t.entities_location,a=t.assigned_entities_location,r=t.role,i=t.company_staff,o=t.entities_forms;T(r),"Super Admin"==r||"Admin"==r?(h(n),l(o),i&&i.map((function(e){if("Super Admin"==r&&e.super_admin_staffs.length){var t=[];e.super_admin_staffs.map((function(e){t.push({value:e.name,label:e.name,id:e.id})})),w((function(n){return[].concat(p(n),[{label:e.name,options:t}])}))}if("Admin"==r&&e.admin_staffs.length){var n=[];e.admin_staffs.map((function(e){n.push({value:e.name,label:e.name,id:e.id})})),w((function(t){return[].concat(p(t),[{label:e.name,options:n}])}))}}))):(v(a),M(n),h([].concat(p(a),p(n))))}))};Object(a.useEffect)((function(){var t=b.filter((function(t){return t.id==e}))[0];t&&q((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{id:t.id,name:t.name,lat:t.lat,lng:t.lng,assigned:t.assigned})})),V(),F(!1)}),[b]),Object(a.useEffect)((function(){h(z?[].concat(p(P),p(E)):p(P)),V()}),[z]);var V=function(){var e=[],t=K?b:N;return t&&e.push(t.map((function(e,t){return r.a.createElement(c.Marker,{key:t,id:t,position:{lat:e.lat,lng:e.lng},title:e.name,label:"".concat(e.name),scaledSize:google.maps.Size(15,25),icon:K?e.assigned?"http://maps.google.com/mapfiles/ms/icons/red.png":"http://maps.google.com/mapfiles/ms/icons/green.png":"http://maps.google.com/mapfiles/ms/icons/blue.png",onClick:X})}))),e},X=function(e,t,n){var a=e.position,r=1==K?b.filter((function(e){return Math.abs(Math.abs(parseFloat(e.lat))-Math.abs(parseFloat(a.lat)))<=9e-6||Math.abs(Math.abs(parseFloat(e.lng))-Math.abs(parseFloat(a.lng)))<=9e-6})):N;L({selectedPlace:{data:r},activeMarker:t,showingInfoWindow:!0})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"page-title-wrapper"},r.a.createElement("div",{className:"page-title-heading"},r.a.createElement("div",{className:"page-title-icon"},r.a.createElement("h4",null,r.a.createElement("i",{className:"fa fa-map"})," Entity Location"))))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("span",null,"Staff Location "),r.a.createElement(s.a,{value:K,onChange:R}),r.a.createElement("span",null," Entity Location"),"Super Admin"!=J&&1==K&&r.a.createElement("div",{className:"float-right"},r.a.createElement("input",{className:"mr-2",type:"checkbox",id:"assignedEntity",checked:z,onChange:function(e){B(e.target.checked)}}),r.a.createElement("span",{htmlFor:"assignedEntity"},"Lemon's Entity Data")),("Super Admin"==J||"Admin"==J)&&1==K&&r.a.createElement("div",{className:"float-right"},r.a.createElement("select",{className:"form-control assign-to-role btn-sm",id:"",onChange:function(e){return t=e.target.value,void Q(t);var t}},r.a.createElement("option",{value:"",disable:"true"},"Select Entity Form"),n.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.form_title)})))),("Super Admin"==J||"Admin"==J)&&0==K&&r.a.createElement("div",{className:"float-right col-md-5"},r.a.createElement(m.default,{options:S,label:"Select Staff",formatGroupLabel:O,onChange:function(e){var t;t=e.id,i.a.get("/staff-current-location/".concat(t)).then((function(e){var t=e.data.staff_location,n={lat:t.lat,lng:t.lng,name:t.staff_detail.name,email:t.staff_detail.email,phone:t.staff_detail.phone_number};_((function(e){return[n]})),V()}))}})))),r.a.createElement("div",null,!I&&r.a.createElement(c.Map,{google:window.google,zoom:$.id?30:7,initialCenter:{lat:"28.2559201",lng:"84.3830657"},center:{lat:$.lng?$.lat:"28.2559201",lng:$.lng?$.lng:"84.3830657"},style:{width:"1000px",height:"410px",top:"0.5rem"}},V(),r.a.createElement(c.InfoWindow,{marker:D.activeMarker,visible:D.showingInfoWindow},r.a.createElement("div",null,1==K?D.selectedPlace&&r.a.createElement("h5",null,"Entity List"):r.a.createElement("h5",null,"Staff Detail"),r.a.createElement("ul",{className:"list-group"},1==K?D.selectedPlace&&D.selectedPlace.data.map((function(e,t){return r.a.createElement("li",{className:"list-group-item pt-1 pb-1",key:t},r.a.createElement("b",null,r.a.createElement("a",{href:"/entities-history/".concat(e.id),className:"text-decoration-none"}," ",e.name)))})):D.selectedPlace&&D.selectedPlace.data.map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Name: ",e.name),r.a.createElement("p",null,"Email: ",e.email),r.a.createElement("p",null,"Phone: ",e.phone))}))))))))},E={display:"flex",alignItems:"center",justifyContent:"space-between"},v={backgroundColor:"#EBECF0",borderRadius:"2em",color:"#172B4D",display:"inline-block",fontSize:12,fontWeight:"normal",lineHeight:"1",minWidth:1,padding:"0.16666666666667em 0.5em",textAlign:"center"},O=function(e){return r.a.createElement("div",{style:E},r.a.createElement("span",null,e.label),r.a.createElement("span",{style:v},e.options.length))};y=Object(c.GoogleApiWrapper)({apiKey:h})(y),t.default=y}}]);