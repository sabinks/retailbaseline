(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{13:function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"f",(function(){return r})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return i}));var n=function(e){switch(e){case 1:return"Assigned";case 2:return"Pending";case 3:return"Approved";case 4:return"Rejected"}},r=function(e){switch(e){case 1:return"Assigned";case 2:return"Approved";case 3:return"Rejected"}},c=function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},o=function(e){return e.substr(0,10)},l=function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return t+"-"+(a=a<10?"0".concat(a):a)+"-"+(n=n<10?"0".concat(n):n)},i=function(){var e=new Date;e.setDate(e.getDate()+1);var t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return t+"-"+(a=a<10?"0".concat(a):a)+"-"+(n=n<10?"0".concat(n):n)}},21:function(e,t,a){var n,r,c;r=[],void 0===(c="function"==typeof(n=function(){return function e(t,a,n){var r,c,o=window,l="application/octet-stream",i=n||l,s=t,d=!a&&!n&&s,u=document.createElement("a"),m=function(e){return String(e)},f=o.Blob||o.MozBlob||o.WebKitBlob||m,p=a||"download";if(f=f.call?f.bind(o):Blob,"true"===String(this)&&(i=(s=[s,i])[0],s=s[1]),d&&d.length<2048&&(p=d.split("/").pop().split("?")[0],u.href=d,-1!==u.href.indexOf(d))){var b=new XMLHttpRequest;return b.open("GET",d,!0),b.responseType="blob",b.onload=function(t){e(t.target.response,p,l)},setTimeout((function(){b.send()}),0),b}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(s)){if(!(s.length>2096103.424&&f!==m))return navigator.msSaveBlob?navigator.msSaveBlob(y(s),p):w(s);i=(s=y(s)).type||l}else if(/([\x80-\xff])/.test(s)){for(var v=0,h=new Uint8Array(s.length),g=h.length;v<g;++v)h[v]=s.charCodeAt(v);s=new f([h],{type:i})}function y(e){for(var t=e.split(/[:;,]/),a=t[1],n=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),r=n.length,c=0,o=new Uint8Array(r);c<r;++c)o[c]=n.charCodeAt(c);return new f([o],{type:a})}function w(e,t){if("download"in u)return u.href=e,u.setAttribute("download",p),u.className="download-js-link",u.innerHTML="downloading...",u.style.display="none",document.body.appendChild(u),setTimeout((function(){u.click(),document.body.removeChild(u),!0===t&&setTimeout((function(){o.URL.revokeObjectURL(u.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,l)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var a=document.createElement("iframe");document.body.appendChild(a),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,l)),a.src=e,setTimeout((function(){document.body.removeChild(a)}),333)}if(r=s instanceof f?s:new f([s],{type:i}),navigator.msSaveBlob)return navigator.msSaveBlob(r,p);if(o.URL)w(o.URL.createObjectURL(r),!0);else{if("string"==typeof r||r.constructor===m)try{return w("data:"+i+";base64,"+o.btoa(r))}catch(e){return w("data:"+i+","+encodeURIComponent(r))}(c=new FileReader).onload=function(e){w(this.result)},c.readAsDataURL(r)}return!0}})?n.apply(t,r):n)||(e.exports=c)},680:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),o=a(5),l=a.n(o),i=a(21),s=a.n(i),d=a(8);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.default=function(){var e=p(Object(n.useState)(0),2),t=e[0],a=e[1],o=p(Object(n.useState)({from_date:Object(c.b)(),to_date:Object(c.c)(),all:0,file_type:"csv"}),2),i=o[0],u=o[1],b=p(Object(n.useState)(""),2),v=b[0],h=b[1],g=p(Object(n.useState)(!1),2),y=g[0],w=g[1],E=function(){return w(!1)};Object(n.useEffect)((function(){var e;if($.fn.dataTable.isDataTable(".dataTableReact"))$(".dataTableReact").DataTable().destroy();e=$(".dataTableReact").DataTable({lengthChange:!1,order:[[0,"desc"]],pageLength:25,autoWidth:!1,processing:!0,serverSide:!0,async:!0,ajax:{url:"/api/staff-attendance?from_date=".concat(i.from_date,"&to_date=").concat(i.to_date,"&all=").concat(i.all),method:"GET",error:function(t,a,n){e.ajax.reload(null,!1)}},columns:[{data:"staff_name"},{data:"attendance_type"},{data:"attendance_detail"},{data:"region_name"},{data:"lat"},{data:"lng"},{data:"login_time"},{data:"remark"},{data:"options"}]}),$(".dataTables_wrapper .row:first-child>div:first-child").removeClass(),$(".dataTables_filter").css("float","left"),e.draw()}),[i.from_date,i.to_date,i.all]);var j=function(e){var t=e.target,a=t.name,n=t.value;u((function(e){var t;return m({},e,(f(t={},a,n),f(t,"all",0),t))}))};return Object(n.useEffect)((function(){window.reactStaffAttendance=function(e){w(!0),h(e)}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"main-card card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-title col-md-4"},"Staff Attendance"),r.a.createElement("div",{className:"form-check col-md-4"},r.a.createElement("input",{className:"mr-2",type:"checkbox",checked:i.all,id:"show-all",onChange:function(e){return function(e){var t=e.target.checked;u((function(e){return m({},e,{all:t?1:0})}))}(e)}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"show-all"},"Show all")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5"},"From Date"),r.a.createElement("div",{className:"col-md-7"},r.a.createElement("input",{className:"",type:"date",id:"from_date",name:"from_date",onChange:function(e){return j(e)},defaultValue:i.from_date})),r.a.createElement("div",{className:"col-md-5"},"To Date"),r.a.createElement("div",{className:"col-md-7"},r.a.createElement("input",{className:"",type:"date",id:"to_date",name:"to_date",onChange:function(e){return j(e)},defaultValue:i.to_date})))),r.a.createElement("div",{className:"col-md-3 ml-2"},r.a.createElement("a",{className:"btn btn-success btn-sm mr-1",onClick:function(e){axios.get("/api/staff-attendance-report?from_date=".concat(i.from_date,"&to_date=").concat(i.to_date,"&all=").concat(i.all)).then((function(e){var t=e.data;s()(t,"report.csv"),E()})).catch((function(e){console.log(t);var t=e.response.data.message;l()("Warning!",t,"error")}))}},r.a.createElement("i",{className:"fa fa-save"})))))),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"table"},r.a.createElement("table",{className:"table table-striped table-bordered dataTableReact"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Staff Name"),r.a.createElement("th",null,"Attendance"),r.a.createElement("th",null,"Attendance Detail"),r.a.createElement("th",null,"Region"),r.a.createElement("th",null,"Latitude"),r.a.createElement("th",null,"Longitude"),r.a.createElement("th",null,"Login Time"),r.a.createElement("th",null,"Remark"),r.a.createElement("th",null,"Action")))))),r.a.createElement(d.a,{show:y,onHide:E},r.a.createElement(d.a.Body,null,v&&r.a.createElement("img",{src:"/storage/images/staff_attendances/".concat(v),style:{transform:"rotate(".concat(t,"deg)"),width:"100%",marginBottom:"20px"}}),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("a",{className:"btn btn-sm mr-1",onClick:function(e){return(n=t-90)>=360&&(n=-360),void a(n);var n}},r.a.createElement("i",{className:"fa fa-undo"})),r.a.createElement("a",{className:"btn btn-sm mr-1",onClick:function(e){return(n=t+90)>=360&&(n=-360),void a(n);var n}},r.a.createElement("i",{className:"fa fa-repeat"})))))))}}}]);