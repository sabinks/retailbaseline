(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{13:function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"f",(function(){return n})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return i}));var r=function(e){switch(e){case 1:return"Assigned";case 2:return"Pending";case 3:return"Approved";case 4:return"Rejected"}},n=function(e){switch(e){case 1:return"Assigned";case 2:return"Approved";case 3:return"Rejected"}},l=function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},c=function(e){return e.substr(0,10)},o=function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,r=e.getDate();return t+"-"+(a=a<10?"0".concat(a):a)+"-"+(r=r<10?"0".concat(r):r)},i=function(){var e=new Date;e.setDate(e.getDate()+1);var t=e.getFullYear(),a=e.getMonth()+1,r=e.getDate();return t+"-"+(a=a<10?"0".concat(a):a)+"-"+(r=r<10?"0".concat(r):r)}},641:function(e,t,a){"use strict";a.r(t);var r=a(22),n=a.n(r),l=a(0),c=a.n(l),o=a(4),i=a.n(o),u=a(8),s=a(53),m=a(23),d=a(13),f=a(5),b=a.n(f),p=a(6),E=a(21),v=a.n(E);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){h(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function w(e,t,a,r,n,l,c){try{var o=e[l](c),i=o.value}catch(e){return void a(e)}o.done?t(i):Promise.resolve(i).then(r,n)}function O(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var l=e.apply(t,a);function c(e){w(l,r,n,c,o,"next",e)}function o(e){w(l,r,n,c,o,"throw",e)}c(void 0)}))}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,l=void 0;try{for(var c,o=e[Symbol.iterator]();!(r=(c=o.next()).done)&&(a.push(c.value),!t||a.length!==t);r=!0);}catch(e){n=!0,l=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}t.default=function(){var e=_(Object(l.useState)({forms:null,formFormDataExist:null,role:null,submittedEntitiesForms:null,loading:!0,title:"",file_type:"csv",form_id:"",from_date:Object(d.b)(),to_date:Object(d.b)(),selected:[]}),2),t=e[0],a=e[1],r=_(Object(l.useState)([{id:1,value:"Filled",label:"Filled"},{id:2,value:"Approved",label:"Approved"},{id:3,value:"Rejected",label:"Rejected"}]),2),o=r[0],f=(r[1],_(Object(l.useState)(!1),2)),E=f[0],g=f[1],w=_(Object(l.useState)(!1),2),j=(w[0],w[1]),N=function(){return g(!1)};Object(l.useEffect)((function(){function e(){return(e=O(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("/entities-forms");case 3:(t=e.sent)&&($(".dataTable"),"DataTables_Table_0"==$(".dataTable").attr("id")&&$(".dataTable").DataTable().destroy(),"Admin"!=t.data.role&&"Regional Admin"!=t.data.role||a((function(e){return y({},e,{forms:t.data.forms,formFormDataExist:t.data.formFormDataExist,role:t.data.role})})),$(".dataTableReact"),$(".dataTableReact").DataTable(),$(".dataTables_wrapper .row:first-child>div:first-child").remove(),$(".dataTables_filter").css("float","left")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var D=function(e){var t=e.target,r=t.name,n=t.value;a((function(e){return y({},e,h({},r,n))}))},F=function(e,t){a((function(a){return y({},a,{form_id:t,title:e})})),g(!0)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"main-card mb-3 card"},c.a.createElement("div",{className:"card-header"},"Super Admin"==t.role?c.a.createElement(c.a.Fragment,null,"View, add, edit or delete the Entities Tracking Form"):c.a.createElement(c.a.Fragment,null,"View, add, edit, or delete the Entities Tracking Form"),c.a.createElement("div",{className:"btn-wrapper btn-wrapper-multiple"},c.a.createElement("button",{type:"button",className:"btn btn-sm btn-success"},t.forms&&c.a.createElement(c.a.Fragment,null,c.a.createElement(p.b,{id:"link_page",to:"/entities-form/create"},"Create Entities Tracking Form"))))),c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"table-responsive"},t.forms||t.submittedEntitiesForms?c.a.createElement("table",{className:"table table-striped table-bordered dataTableReact"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Creator Name"),c.a.createElement("th",null,"Form Title"),c.a.createElement("th",null,"Action"))),c.a.createElement("tbody",null,t.forms.map((function(e,a){return c.a.createElement("tr",{key:a},c.a.createElement("td",null,e.form_creator.name),c.a.createElement("td",null,e.form_title),c.a.createElement("td",null,("Admin"==t.role||"Regional Admin"==t.role)&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"btn-group"},c.a.createElement(p.b,{className:"btn btn-secondary btn-sm mr-1",to:"/entities-form/".concat(e.id)},c.a.createElement("i",{className:"fa fa-pencil"})),c.a.createElement("button",{title:"Download Entity Report",className:"btn btn-success btn-sm mr-1",onClick:function(t){return F(e.form_title,e.id)}},c.a.createElement("i",{className:"fa fa-save"}))),c.a.createElement(p.b,{title:"View",className:"btn btn-secondary btn-sm mr-1",to:"/entities-form-view/".concat(e.id)},c.a.createElement("i",{className:"fa fa-eye"})))))})))):c.a.createElement("table",{className:"table table-striped table-bordered dataTable"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Creator Name"),c.a.createElement("th",{style:{width:"30%"}},"Staffs Associated"),c.a.createElement("th",null,"Action"))),c.a.createElement("tbody",null))),c.a.createElement(u.a,{show:E,onHide:N},c.a.createElement(u.a.Header,{closeButton:!0},c.a.createElement(u.a.Title,null,"Filter")),c.a.createElement(u.a.Body,null,c.a.createElement("div",{className:"form-group col-md-8"},c.a.createElement("label",null,"From Date"),c.a.createElement("div",null,c.a.createElement("input",{className:"form-control",type:"date",id:"from-date",name:"from_date",value:t.from_date,onChange:function(e){return D(e)}}))),c.a.createElement("div",{className:"form-group col-md-8"},c.a.createElement("label",null,"To Date"),c.a.createElement("div",null,c.a.createElement("input",{className:"form-control",type:"date",id:"to-date",name:"to_date",value:t.to_date,onChange:function(e){return D(e)}}))),c.a.createElement("div",{className:"form-group col-md-8"},c.a.createElement("label",null,"To Date"),c.a.createElement("div",null,c.a.createElement(m.default,{name:"status",placeholder:"Select one or multiple",value:t.selected,options:o,onChange:function(e){a((function(t){return y({},t,{selected:e,select_status:e?e.map((function(e){return e.id})):[]})}))},isMulti:!0})))),c.a.createElement(u.a.Footer,null,c.a.createElement(s.a,{variant:"primary",size:"sm",onClick:function(){var e={select_status:t.select_status,form_id:t.form_id,from_date:t.from_date,to_date:t.to_date,file_type:t.file_type};i.a.post("/generate-entity-form-report",e).then((function(e){var a=e.data,r="".concat(Object(d.d)(t.title),"_report.csv");v()(a,r),N(),j(!1)})).catch((function(e){var t=e.response.data.message;b()("Warning!",t,"error"),j(!1)}))}},"Download Report"))))))}}}]);