(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{502:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(4),i=n.n(l),o=n(14),c=n(129),s=n(276),u=n(24);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw r}}return l}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var y=document.getElementById("route").getAttribute("value"),E=function(){var e=Object(o.g)().id,t=g(Object(a.useState)([]),2),n=t[0],l=t[1],m=g(Object(a.useState)([]),2),p=m[0],b=m[1],h=g(Object(a.useState)([]),2),y=h[0],E=h[1],v=g(Object(a.useState)([]),2),O=v[0],j=v[1],w=g(Object(a.useState)([]),2),A=w[0],N=w[1],_=g(Object(a.useState)([]),2),k=_[0],P=_[1],M=g(Object(a.useState)(!0),2),C=M[0],I=M[1],F=g(Object(a.useState)({}),2),x=F[0],D=F[1],L=g(Object(a.useState)(!0),2),W=L[0],z=L[1],B=g(Object(a.useState)("None"),2),G=B[0],J=B[1],T=g(Object(a.useState)(0),2),H=T[0],K=T[1],R=g(Object(a.useState)({id:"",name:"",lat:"",lng:""}),2),U=R[0],$=R[1];Object(a.useEffect)((function(){q(0)}),[]);var q=function(e){i.a.get("/entities-location/".concat(e)).then((function(e){var t=e.data,n=t.entities_location,a=t.assigned_entities_location,r=t.role,i=t.company_staff,o=t.entities_forms;J(r),"Super Admin"==r||"Admin"==r?(b(n),l(o),i&&i.map((function(e){if("Super Admin"==r&&e.super_admin_staffs.length){var t=[];e.super_admin_staffs.map((function(e){t.push({value:e.name,label:e.name,id:e.id})})),j((function(n){return[].concat(d(n),[{label:e.name,options:t}])}))}if("Admin"==r&&e.admin_staffs.length){var n=[];e.admin_staffs.map((function(e){n.push({value:e.name,label:e.name,id:e.id})})),j((function(t){return[].concat(d(t),[{label:e.name,options:n}])}))}}))):(E(a),P(n),b([].concat(d(a),d(n))))}))};Object(a.useEffect)((function(){var t=p.filter((function(t){return t.id==e}))[0];t&&$((function(e){return f(f({},e),{},{id:t.id,name:t.name,lat:t.lat,lng:t.lng,assigned:t.assigned})})),Q(),I(!1)}),[p]),Object(a.useEffect)((function(){b(W?[].concat(d(k),d(y)):d(k)),Q()}),[W]);var Q=function(){var e=[],t=H?p:A;return t&&e.push(t.map((function(e,t){return r.a.createElement(c.Marker,{key:t,id:t,position:{lat:e.lat,lng:e.lng},title:e.name,label:"".concat(e.name),scaledSize:google.maps.Size(15,25),icon:H?e.assigned?"http://maps.google.com/mapfiles/ms/icons/red.png":"http://maps.google.com/mapfiles/ms/icons/green.png":"http://maps.google.com/mapfiles/ms/icons/blue.png",onClick:V})}))),e},V=function(e,t,n){var a=e.position,r=1==H?p.filter((function(e){return Math.abs(Math.abs(parseFloat(e.lat))-Math.abs(parseFloat(a.lat)))<=9e-6||Math.abs(Math.abs(parseFloat(e.lng))-Math.abs(parseFloat(a.lng)))<=9e-6})):A;D({selectedPlace:{data:r},activeMarker:t,showingInfoWindow:!0})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"page-title-wrapper"},r.a.createElement("div",{className:"page-title-heading"},r.a.createElement("div",{className:"page-title-icon"},r.a.createElement("h4",null,r.a.createElement("i",{className:"fa fa-map"})," Entity Location"))))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("span",null,"Staff Location "),r.a.createElement(s.a,{value:H,onChange:K}),r.a.createElement("span",null," Entity Location"),"Super Admin"!=G&&1==H&&r.a.createElement("div",{className:"float-right"},r.a.createElement("input",{className:"mr-2",type:"checkbox",id:"assignedEntity",checked:W,onChange:function(e){z(e.target.checked)}}),r.a.createElement("span",{htmlFor:"assignedEntity"},"Lemon's Entity Data")),("Super Admin"==G||"Admin"==G)&&1==H&&r.a.createElement("div",{className:"float-right"},r.a.createElement("select",{className:"form-control assign-to-role btn-sm",id:"",onChange:function(e){return t=e.target.value,void q(t);var t}},r.a.createElement("option",{value:"",disable:"true"},"Select Entity Form"),n.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.form_title)})))),("Super Admin"==G||"Admin"==G)&&0==H&&r.a.createElement("div",{className:"float-right col-md-5"},r.a.createElement(u.default,{options:O,label:"Select Staff",formatGroupLabel:S,onChange:function(e){var t;t=e.id,i.a.get("/staff-current-location/".concat(t)).then((function(e){var t=e.data.staff_location,n={lat:t.lat,lng:t.lng,name:t.staff_detail.name,email:t.staff_detail.email,phone:t.staff_detail.phone_number};N((function(e){return[n]})),Q()}))}})))),r.a.createElement("div",null,!C&&r.a.createElement(c.Map,{google:window.google,zoom:U.id?30:7,initialCenter:{lat:"28.2559201",lng:"84.3830657"},center:{lat:U.lng?U.lat:"28.2559201",lng:U.lng?U.lng:"84.3830657"},style:{width:"1000px",height:"410px",top:"0.5rem"}},Q(),r.a.createElement(c.InfoWindow,{marker:x.activeMarker,visible:x.showingInfoWindow},r.a.createElement("div",null,1==H?x.selectedPlace&&r.a.createElement("h5",null,"Entity List"):r.a.createElement("h5",null,"Staff Detail"),r.a.createElement("ul",{className:"list-group"},1==H?x.selectedPlace&&x.selectedPlace.data.map((function(e,t){return r.a.createElement("li",{className:"list-group-item pt-1 pb-1",key:t},r.a.createElement("b",null,r.a.createElement("a",{href:"/entities-history/".concat(e.id),className:"text-decoration-none"}," ",e.name)))})):x.selectedPlace&&x.selectedPlace.data.map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Name: ",e.name),r.a.createElement("p",null,"Email: ",e.email),r.a.createElement("p",null,"Phone: ",e.phone))}))))))))},v={display:"flex",alignItems:"center",justifyContent:"space-between"},O={backgroundColor:"#EBECF0",borderRadius:"2em",color:"#172B4D",display:"inline-block",fontSize:12,fontWeight:"normal",lineHeight:"1",minWidth:1,padding:"0.16666666666667em 0.5em",textAlign:"center"},S=function(e){return r.a.createElement("div",{style:v},r.a.createElement("span",null,e.label),r.a.createElement("span",{style:O},e.options.length))};E=Object(c.GoogleApiWrapper)({apiKey:y})(E),t.default=E}}]);