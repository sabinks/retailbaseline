(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{692:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(72),c=r.n(o),l=r(97);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],a=!0,n=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(r.push(c.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var d=function(){var e=s(Object(a.useState)([]),2),t=e[0],r=e[1],o=s(Object(a.useState)({}),2),m=o[0],d=o[1],f=s(Object(a.useState)(!0),2),b=f[0],p=f[1],y=s(Object(a.useState)({id:localStorage.getItem("catId")?localStorage.getItem("catId"):0}),2),g=y[0],v=y[1];Object(a.useEffect)((function(){axios.get("/stock/category").then((function(e){var t=e.data.category_list;r(t)}))}),[]),Object(a.useEffect)((function(){axios.get("/stock/stock-register/".concat(g.id)).then((function(e){var t=e.data.item_list,r=[],a=[],n=[],o=[];t.map((function(e){r.push(e.name),a.push(e.sum_inward_stock.length?e.sum_inward_stock[0].quantity:0),n.push(e.sum_outward_stock.length?e.sum_outward_stock[0].quantity:0),o.push((e.sum_inward_stock.length?e.sum_inward_stock[0].quantity:0)-(e.sum_outward_stock.length?e.sum_outward_stock[0].quantity:0))})),d({labels:r,datasets:[{label:"Total Stock",backgroundColor:"blue",data:a},{label:"Outward Stock",backgroundColor:"orange",hoverBackgroundColor:"orange",data:n},{label:"Remaining Stock",backgroundColor:"gray",hoverBackgroundColor:"gray",data:o}]}),p(!1)}))}),[g.id]);var h=function(e){var t=e.target.value;localStorage.setItem("catId",t),v((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{id:t})}))};return n.a.createElement("div",null,b&&n.a.createElement(c.a,{type:"spin",color:"gray",height:"10%",width:"10%"}),!b&&m&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"col-md-3"},"Select Category",n.a.createElement("select",{className:"form-control",name:"id",onChange:function(e){return h(e)},value:g.id},n.a.createElement("option",{value:"",disable:"true"},"Choose Category:"),n.a.createElement("option",{value:"0"},"Select All"),t.map((function(e,t){return n.a.createElement("option",{key:t,value:e.id},e.name)})))),n.a.createElement(l.a,{data:m,width:null,height:null,options:{responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!0,text:"Stock Summary"}}}})))};function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],a=!0,n=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(r.push(c.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var p=function(){var e=f(Object(a.useState)({absent_staff:0,present_staff:0,no_attendance:0}),2),t=(e[0],e[1]),r=f(Object(a.useState)({}),2),o=r[0],i=r[1],u=f(Object(a.useState)(!0),2),s=u[0],m=u[1];return Object(a.useEffect)((function(){axios.get("pie-chart-staff-attendance").then((function(e){var r=e.data,a=r.absent_staff,n=r.present_staff,o=r.no_attendance;t({present_staff:n,absent_staff:a,no_attendance:o}),i({labels:["Present","Absent","No Attendance"],datasets:[{label:"Staff Attendance",data:[n,a,o],backgroundColor:["blue","orange","gray"],borderColor:["blue","orange","gray"],borderWidth:1,animation:!1}]}),m(!1)}))}),[]),n.a.createElement("div",null,s&&n.a.createElement(c.a,{type:"spin",color:"gray",height:"25%",width:"25%"}),!s&&o&&n.a.createElement(l.b,{data:o,options:{responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!0,text:"Staff Attendance"}}}}))};function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],a=!0,n=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(r.push(c.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var E=function(){var e=v(Object(a.useState)(!0),2),t=e[0],r=e[1],o=v(Object(a.useState)(!0),2),l=o[0],i=o[1],u=v(Object(a.useState)({total_approved:0,total_pending:0,total_rejected:0}),2),s=u[0],m=u[1],d=v(Object(a.useState)({id:localStorage.getItem("formId")?localStorage.getItem("catId"):0}),2),f=d[0],b=d[1],p=v(Object(a.useState)([]),2),h=p[0],E=p[1];Object(a.useEffect)((function(){axios.get("/superadmin/entity-form").then((function(e){var t=e.data.form_list;E(t),r(!1)}))}),[]),Object(a.useEffect)((function(){axios.get("/superadmin/entity-count/".concat(f.id)).then((function(e){var t=e.data,r=t.total_approved,a=t.total_pending,n=t.total_rejected;m({total_approved:r,total_pending:a,total_rejected:n}),i(!1)}))}),[f.id]);var O=function(e){var t=e.target.value;localStorage.setItem("formId",t),b((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{id:t})}))};return n.a.createElement("div",null,l&&n.a.createElement(c.a,{type:"spin",color:"gray",height:"9%",width:"9%"}),!t&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-3"},"Select Entity Form",n.a.createElement("select",{className:"form-control",name:"id",onChange:function(e){return O(e)},value:f.id},n.a.createElement("option",{value:"",disable:"true"},"Choose Form:"),n.a.createElement("option",{value:"0"},"Select All"),h&&h.map((function(e,t){return n.a.createElement("option",{key:t,value:e.id},e.title)})))))),!l&&s&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row mt-3"},n.a.createElement("div",{className:"col-md-4"},n.a.createElement("div",{className:"card text-white bg-success mb-3 text-center",style:{maxWidth:"18rem"}},n.a.createElement("div",{className:"card-header"},n.a.createElement("h5",null,"Total Approved")),n.a.createElement("div",{className:"card-body"},n.a.createElement("h1",{className:""},s.total_approved)))),n.a.createElement("div",{className:"col-md-4"},n.a.createElement("div",{className:"card text-white bg-warning mb-3 text-center",style:{maxWidth:"18rem"}},n.a.createElement("div",{className:"card-header"},n.a.createElement("h5",null,"Total Pending")),n.a.createElement("div",{className:"card-body"},n.a.createElement("h1",{className:""},s.total_pending)))),n.a.createElement("div",{className:"col-md-4"},n.a.createElement("div",{className:"card text-white bg-danger mb-3 text-center",style:{maxWidth:"18rem"}},n.a.createElement("div",{className:"card-header"},n.a.createElement("h5",null,"Total Rejected")),n.a.createElement("div",{className:"card-body"},n.a.createElement("h1",{className:""},s.total_rejected)))))))};function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],a=!0,n=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(r.push(c.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw o}}return r}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var N=function(){var e=w(Object(a.useState)(!0),2),t=e[0],r=e[1],o=w(Object(a.useState)([]),2),i=o[0],u=o[1],s=w(Object(a.useState)([]),2),m=s[0],d=s[1],f=w(Object(a.useState)({id:localStorage.getItem("reportFormId")?localStorage.getItem("reportFormId"):0}),2),b=f[0],p=f[1];Object(a.useEffect)((function(){axios.get("/report-forms").then((function(e){var t=e.data,r=t.form_list,a=t.assigned_report_forms_list;d([].concat(S(r),S(a)))}))}),[]),Object(a.useEffect)((function(){axios.get("daily-report-count/".concat(b.id)).then((function(e){var t=e.data,a=t.data,n=t.date,o=[],c=[],l=[];a&&a.map((function(e){o.push(e.day+"-"+e.weekday.slice(0,3)),l.push(e.day),c.push(e.count)}));var i={labels:o,datasets:[{label:"Report Data Count - (".concat(n,")"),backgroundColor:"blue",data:c}]};u(i),r(!1)}))}),[b.id]);var y=function(e){var t=e.target.value;localStorage.setItem("reportFormId",t),p((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{id:t})}))};return n.a.createElement("div",null,t&&n.a.createElement(c.a,{type:"spin",color:"gray",height:"10%",width:"10%"}),!t&&i&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"col-md-3"},"Select Report Form",n.a.createElement("select",{className:"form-control",name:"id",onChange:function(e){return y(e)},value:b.id},n.a.createElement("option",{value:"",disable:"true"},"Choose Report Form:"),n.a.createElement("option",{value:"0"},"Select All"),m.length>0&&m.map((function(e,t){return n.a.createElement("option",{key:t,value:e.id},e.title)})))),n.a.createElement(l.a,{data:i,width:null,height:null,options:{responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!0,text:"Daily Report Data Count"}}}})))};function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],a=!0,n=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(r.push(c.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}t.default=function(){var e=I(Object(a.useState)({name:"",role:""}),2),t=e[0],r=e[1],o=I(Object(a.useState)(!0),2),c=(o[0],o[1]);return Object(a.useEffect)((function(){axios.get("user-details").then((function(e){var t=e.data,a=t.name,n=t.role;r({name:a,role:n}),c(!1)}))}),[]),Object(a.useEffect)((function(){}),[]),n.a.createElement(a.Fragment,null,n.a.createElement("div",{className:"app-page-title"},n.a.createElement("div",{className:"page-title-wrapper"},n.a.createElement("div",{className:"page-title-heading"},n.a.createElement("div",{className:"page-title-icon"},n.a.createElement("i",{className:"fa fa-tachometer"})),n.a.createElement("div",null,"Welcome ",t.name)))),n.a.createElement("div",{className:"main-card mb-3 card"},n.a.createElement("div",{className:"card-body"},("Admin"==t.role||"Regional Admin"==t.role||"Supervisor"==t.role)&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-3"},n.a.createElement(p,null)),n.a.createElement("div",{className:"col-md-2"}),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(d,null))),n.a.createElement("br",null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-9"},n.a.createElement(N,null)))),"Super Admin"==t.role&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-3 justify-content-center"},n.a.createElement(p,null)),n.a.createElement("div",{className:"col-md-2"}),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(E,null))),n.a.createElement("br",null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-9"},n.a.createElement(N,null)))))))}}}]);